# 動画解析実験

## 概要
講義動画の自動文字起こしとスライド内容理解のためのプロトタイプを構築しました。OpenAIのWhisperとGoogleのGemini APIを組み合わせることで、より高精度な文字起こしとスライド内容の理解を実現するシステムを提案します。

## 実装内容

### 1. 基本機能
- 動画ファイルの読み込みと解析
- Whisperによる高精度な音声文字起こし
- Gemini APIによるスライド内容の認識
- スライド内容を活用した文字起こしの補正
- フィラー除去と文章の整形

### 2. 技術スタック
- Python 3.9
- OpenAI Whisper（音声文字起こし）
- Google Generative AI (Gemini API)（スライド解析）
- 使用ライブラリ：
  - openai-whisper
  - google-generativeai
  - python-dotenv
  - pathlib
  - mimetypes

### 3. 主な機能

#### 3.1 ハイブリッド解析アプローチ
- Whisperによる高精度な音声文字起こし
- Gemini APIによるスライド内容の認識
- タイムスタンプを活用した文字起こしとスライドの紐付け
- スライド内容を活用した文字起こしの補正
  - 専門用語の補正
  - ドメイン特有の用語の補正
  - 文脈に基づく補正

#### 3.2 フィラー除去
以下のような不要な表現を除去：
- 一般的なフィラー（「えー」「あのー」「そのー」など）
- 繰り返し表現
- 不要な接続詞
- 文末の不要な表現
- 余分な空白

#### 3.3 文章整形
- 文末の句読点を統一
- 文頭の不要な文字を削除
- 連続する句読点を整理
- 文と文の間の空白を適切に調整

## 実験結果

### 1. 各技術の特徴
- Whisper
  - 音声文字起こしの精度が高い
  - 日本語の自然な表現に優れている
  - 専門用語の認識精度が高い

- Gemini API
  - スライド内容の認識精度が高い
  - 視覚的な情報の理解に優れている
  - 文脈に基づく補正が可能

### 2. 改善点
- より細かいフィラーや口語表現の除去パターンの追加
- 技術用語や表現の統一
- スライドと文字起こしの紐付け精度の向上
- 文章の簡潔化や要約機能の追加

### 3. 制限事項
- APIの利用制限やコスト
- 動画の長さや品質による精度の変動
- スライドと音声の同期精度
- 処理時間の増加

## 今後の展望

### 1. 機能拡張
- より高度な文章整形機能の追加
- スライドの構造認識の精度向上
- 多言語対応
- リアルタイム処理への対応

### 2. 最適化
- 処理速度の改善
- メモリ使用量の最適化
- エラーハンドリングの強化
- スライドと音声の同期精度向上

### 3. 応用
- 他の教育コンテンツへの適用
- リアルタイム文字起こしへの応用
- コンテンツの自動要約機能の追加
- 多言語コンテンツへの対応

## 使用方法

1. 環境設定
```bash
# 必要なパッケージのインストール
pip install openai-whisper google-generativeai python-dotenv

# .envファイルにAPIキーを設定
GOOGLE_API_KEY=your_api_key_here
OPENAI_API_KEY=your_api_key_here
```

2. スクリプトの実行
```bash
python analyze_video.py
```

## 注意事項
- APIキーは適切に管理してください
- 動画ファイルは適切な形式（MP4推奨）で準備してください
- 出力ディレクトリのパーミッションを確認してください
- 処理時間が長くなる可能性があることを考慮してください
